<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport"
        content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title>Kajet</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #1d2021;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <canvas id="canvas" width="2500" height="720"></canvas>
    <script src="kajet.js"></script>
    <script>
        Module.onRuntimeInitialized = () => {
            console.log("WASM runtime initialized");

            // Use the existing canvas
            const canvas = document.getElementById("canvas");
            Module.canvas = canvas;

            // Disable right-click context menu
            canvas.addEventListener("contextmenu", e => e.preventDefault());

            // function updateCanvasSize() {
            //     const dpr = window.devicePixelRatio || 1;
            //     // // Only resize if changed to avoid flicker
            //     const w = canvas.clientWidth * dpr;
            //     const h = canvas.clientHeight * dpr;
            //     console.log(w);
            //     console.log(canvas.width);
            //
            //     console.log("---")
            //     console.log(h);
            //     console.log(canvas.height);
            //
            //     if (canvas.width > 3000) return;
            //     if (Math.abs(canvas.width - w) >= 1.0 || Math.abs(canvas.height - h) >= 1.0) {
            //         canvas.width = w;
            //         canvas.height = h;
            //         // canvas.style.width = `${w}px`;
            //         // canvas.style.height = `${h}px`;
            //         console.log("AB");
            //     }
            // }
            //
            // function frame() {
            //     updateCanvasSize(); // update size each frame
            //     requestAnimationFrame(frame);
            // }
            //
            // requestAnimationFrame(frame);
        };
    </script>
</body>

</html>
