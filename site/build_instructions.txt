1. install emscripten:

git clone https://github.com/emscripten-core/emsdk.git
cd emsdk
./emsdk install latest
./emsdk activate latest
source ./emsdk_env.sh

2. set EMCCFLAGS:

export EMCC_CFLAGS="-O3 -sUSE_GLFW=3 -sASSERTIONS=1 -sWASM=1 -sASYNCIFY -sGL_ENABLE_GET_PROC_ADDRESS=1"

3. build raylib for wasm:

git clone https://github.com/raysan5/raylib.git
cd raylib/src
emcmake cmake -DPLATFORM=Web ..
emmake make

# this generates libraylib.a inside raylib/src/raylib

4. Add build.rs:

fn main() {
    println!("cargo:rustc-link-search=native=raylib/src/raylib");
    println!("cargo:rustc-link-lib=static=raylib");
}

5. Add wasm target:

rustup target add wasm32-unknown-emscripten

6. build:

cargo build --target wasm32-unknown-emscripten --release

7. From the build folder copy kajet.js and kajet.wasm to be visible from the html.

8. Serve to test:

python -m http.server 6969


